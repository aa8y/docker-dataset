parameters:
  repository: aa8y/postgres-dataset
templates:
  build: docker build -t {{{repository}}}:{{tag}} --build-arg DATASETS={{datasets}} {{context}}
  push: docker push {{{repository}}}:{{tag}}
contexts:
  postgres:
    templates:
      test: >
        docker run --name ds-pg-{{tag}} -d --rm -it {{{repository}}}:{{tag}} && 
        docker stop ds-pg-{{tag}}
    tagKeys: datasets
    tags:
      dellstore:
      iso3166:
      pagila:
      sportsdb:
      usda:
      world:
      all:
        datasets: dellstore,iso3166,pagila,sportsdb,usda,world
      latest:
        datasets: dellstore,iso3166,pagila,sportsdb,usda,world
